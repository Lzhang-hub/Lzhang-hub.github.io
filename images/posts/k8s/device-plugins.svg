<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1026" height="401" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title: Device Plugin 工作时序图

device plugin->kubelet: 注册(Unix socket, API Version, ResourceName)
device plugin->kubelet: ListAndWatch,发送当前节点上的设备资源 Foo
kubelet->api server: 通过节点状态更新资源状态
user->api server: 创建pod, 请求 Foo 资源
api server->kubelet: 根据节点状态进行 pod 调度
kubelet->device plugin: 调用 Allocate 进行资源分配]]></source><desc>Device Plugin 工作时序图</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="224.875" height="29" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="15" y="30" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Device Plugin 工作时序图</tspan></text></g><g class="actor"><rect x="10" y="49" width="146.59375" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="21" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">device plugin</tspan></text></g><g class="actor"><rect x="10" y="342" width="146.59375" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="21" y="367" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">device plugin</tspan></text></g><line x1="83.296875" x2="83.296875" y1="88" y2="342" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="477.7265625" y="49" width="87.796875" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="487.7265625" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="487.7265625">kubelet</tspan></text></g><g class="actor"><rect x="477.7265625" y="342" width="87.796875" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="487.7265625" y="367" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="487.7265625">kubelet</tspan></text></g><line x1="521.625" x2="521.625" y1="88" y2="342" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="692.9453125" y="49" width="117.703125" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="702.9453125" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="702.9453125">api server</tspan></text></g><g class="actor"><rect x="692.9453125" y="342" width="117.703125" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="702.9453125" y="367" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="702.9453125">api server</tspan></text></g><line x1="751.796875" x2="751.796875" y1="88" y2="342" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="936.1875" y="49" width="59.90625" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="946.1875" y="74" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="946.1875">user</tspan></text></g><g class="actor"><rect x="936.1875" y="342" width="59.90625" height="39" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="946.1875" y="367" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="946.1875">user</tspan></text></g><line x1="966.140625" x2="966.140625" y1="88" y2="342" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="94.296875" y="118.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="93.296875">注册(Unix socket, API Version, ResourceName)</tspan></text><line x1="83.296875" x2="521.625" y1="127" y2="127" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="124.390625" y="157.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="124.390625">ListAndWatch,发送当前节点上的设备资源 Foo</tspan></text><line x1="83.296875" x2="521.625" y1="166" y2="166" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="540.703125" y="196.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="539.703125">通过节点状态更新资源状态</tspan></text><line x1="521.625" x2="751.796875" y1="205" y2="205" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="762.796875" y="235.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="761.796875">创建pod, 请求 Foo 资源</tspan></text><line x1="966.140625" x2="751.796875" y1="244" y2="244" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="532.625" y="274.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="531.625">根据节点状态进行 pod 调度</tspan></text><line x1="751.796875" x2="521.625" y1="283" y2="283" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="190.2890625" y="313.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="189.2890625">调用 Allocate 进行资源分配</tspan></text><line x1="521.625" x2="83.296875" y1="322" y2="322" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>